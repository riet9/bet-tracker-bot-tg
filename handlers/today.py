from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.constants import ParseMode
from telegram.ext import ContextTypes
from datetime import datetime
from utils.storage import get_user
from utils.timezone import LATVIA_TZ

# /today ‚Äî –≤—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –∏–∑ ChatGPT, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞
async def today(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = update.message.text or ''
    lines = text.splitlines()

    if context.user_data.get('awaiting_today_input'):
        context.user_data.pop('awaiting_today_input', None)
        # –æ—Ç–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å—ë –¥–æ –ø–µ—Ä–≤–æ–π –ª–∏–Ω–∏–∏ —Å–æ ¬´@¬ª
        start_idx = next((i for i, l in enumerate(lines) if '@' in l), 0)
        await process_today_lines(update, context, lines[start_idx:])
        return

    if len(lines) == 1:
        context.user_data['awaiting_today_input'] = True
        await update.message.reply_text('üì• –í—Å—Ç–∞–≤—å –ø—Ä–æ–≥–Ω–æ–∑ (—Å–ø–∏—Å–æ–∫ —Å—Ç–∞–≤–æ–∫), –Ω–∞—á–∏–Ω–∞—è —Å–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.')
        return

    # –µ—Å–ª–∏ —Ç–µ–∫—Å—Ç –Ω–∞ —Ç–æ–π –∂–µ —Å—Ç—Ä–æ–∫–µ —Å /today
    lines = lines[1:]
    if not any('@' in l for l in lines):
        await update.message.reply_text('‚ö†Ô∏è –í—Å—Ç–∞–≤—å –ø—Ä–æ–≥–Ω–æ–∑ –≤ —Ñ–æ—Ä–º–∞—Ç–µ: –ú–∞—Ç—á ‚Äì –∏—Å—Ö–æ–¥ @–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç')
        return

    await process_today_lines(update, context, lines)

# –ì—Ä—É–ø–ø–∏—Ä—É–µ–º —Å—Ç—Ä–æ–∫–∏ –≤ –∑–∞–ø–∏—Å–∏, —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
def format_entries(lines: list[str]) -> str:
    # –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∑–∞–ø—É—Å–∫–∞–º —Å—Ç—Ä–æ–∫–∏ —Å @
    entries = []
    current = []
    for line in lines:
        if '@' in line and current:
            entries.append(current)
            current = [line]
        else:
            current.append(line)
    if current:
        entries.append(current)

    cats = {'safe': [], 'value': [], 'sharp': [], 'wildcard': [], 'other': []}
    for group in entries:
        text = '\n'.join(g.strip() for g in group if g.strip())
        # –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø–æ —Ç–µ–≥—É
        tag = None
        for t in ['#safe', '#value', '#sharp', '#wildcard']:
            if t in text:
                tag = t.lstrip('#')
                break
        if not tag:
            # fallback –ø–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—É
            try:
                coeff = float(text.split('@')[-1].split()[0])
            except:
                tag = 'other'
            else:
                if coeff <= 1.20:
                    tag = 'safe'
                elif coeff <= 2.50:
                    tag = 'value'
                elif coeff <= 3.50:
                    tag = 'sharp'
                else:
                    tag = 'wildcard'
        cats.setdefault(tag, []).append(text)

    # —Å—Ç—Ä–æ–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ
    msg = 'üìÖ <b>–°—Ç–∞–≤–∫–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è:</b>\n\n'
    total = 0
    for cat in ['safe', 'value', 'sharp', 'wildcard']:
        items = cats.get(cat, [])
        if items:
            msg += f'<b>#{cat}:</b>\n'
            for i, e in enumerate(items, 1):
                msg += f'{i}. {e}\n\n'
            total += len(items)
    form = '—Å—Ç–∞–≤–∫–∞' if total == 1 else '—Å—Ç–∞–≤–∫–∏' if total < 5 else '—Å—Ç–∞–≤–æ–∫'
    msg += f'üí∞ –í—Å–µ–≥–æ: {total} {form}'
    if total == 0:
        return '‚ö†Ô∏è –ù–∏ –æ–¥–Ω–∞ —Å—Ç–∞–≤–∫–∞ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–∞. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å —Ñ–æ—Ä–º–∞—Ç –∏–∑ –ø—Ä–æ–º–ø—Ç–∞.'
    return msg

async def process_today_lines(update: Update, context: ContextTypes.DEFAULT_TYPE, lines: list[str]):
    response = format_entries(lines)
    await update.message.reply_text(
        response,
        parse_mode=ParseMode.HTML if response.startswith('üìÖ') else None
    )

# /prompt ‚Äî –≤—ã–±–æ—Ä —É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏–ª–∏ –≤–µ—á–µ—Ä–Ω–µ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
async def prompt(update: Update, context: ContextTypes.DEFAULT_TYPE):
    keyboard = [
        [InlineKeyboardButton('üåÖ –£—Ç—Ä–µ–Ω–Ω–∏–π –ø—Ä–æ–º–ø—Ç', callback_data='prompt_morning')],
        [InlineKeyboardButton('üåô –í–µ—á–µ—Ä–Ω–∏–π –ø—Ä–æ–º–ø—Ç', callback_data='prompt_evening')]
    ]
    await update.message.reply_text(
        '–í—ã–±–µ—Ä–∏ –ø—Ä–æ–º–ø—Ç –¥–ª—è ChatGPT:',
        reply_markup=InlineKeyboardMarkup(keyboard)
    )

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–æ–∫ –ø—Ä–æ–º–ø—Ç–æ–≤
async def prompt_button_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query; await query.answer()
    chat_id = str(query.message.chat.id)
    user = get_user(chat_id); banks = user.get('banks', {})
    today = datetime.now(LATVIA_TZ).strftime('%d.%m.%Y')

    if query.data == 'prompt_morning':
        text = (
            "–Ø –Ω–µ–º–Ω–æ–≥–æ –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É—é—Å—å –≤ —Ñ—É—Ç–±–æ–ª–µ, —Ö–æ–∫–∫–µ–µ –∏ CS2, –Ω–æ –¥–æ–≤–µ—Ä—è—é —Å–∏—Å—Ç–µ–º–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é.\n\n"
            f"–ù–∞–π–¥–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è ({today}):\n"
            " ‚Ä¢ 1‚Äì2 –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –Ω–∞–¥—ë–∂–Ω—ã–µ #safe (1.10‚Äì1.25),\n"
            " ‚Ä¢ –¥–æ 5 –ª–æ–≥–∏—á–Ω—ã—Ö #value (1.60‚Äì2.80),\n"
            " ‚Ä¢ –º–∞–∫—Å–∏–º—É–º 2 –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ #sharp (2.80‚Äì3.50) –∏–ª–∏ #wildcard (3.50+).\n"
            "–ù–∞—á–∏–Ω–∞–π —Å –º–∞—Ç—á–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–∞—Ä—Ç—É—é—Ç —Å 08:00 –ø–æ –†–∏–≥–µ.\n\n"
            "–ò—â–∏ –ø–æ –≤—Å–µ–º –≤–∏–¥–∞–º —Å–ø–æ—Ä—Ç–∞: —Ñ—É—Ç–±–æ–ª, —Ö–æ–∫–∫–µ–π, CS2, —Ç–µ–Ω–Ω–∏—Å, –Ω–∞—Å—Ç–æ–ª—å–Ω—ã–π —Ç–µ–Ω–Ω–∏—Å, –≤–æ–ª–µ–π–±–æ–ª, –±–∞—Å–∫–µ—Ç–±–æ–ª, –≥–∞–Ω–¥–±–æ–ª, Dota, LoL, Valorant, Rocket League –∏ –¥—Ä—É–≥–∏–µ. "
            "–Ø –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Å—å —Å–ø–æ—Ä—Ç–æ–º ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π –∫–∏–±–µ—Ä—Å–ø–æ—Ä—Ç, –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –≤–∏–¥—ã, –∂–µ–Ω—Å–∫–∏–µ —Ç—É—Ä–Ω–∏—Ä—ã –∏ –Ω–∏–∑—à–∏–µ –ª–∏–≥–∏, –µ—Å–ª–∏ –≤ –Ω–∏—Ö –µ—Å—Ç—å value.\n\n"
            "–ù–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Å—è —Å—Ç–∞–≤–∫–∞–º–∏ –Ω–∞ –ø–æ–±–µ–¥—É –∏–ª–∏ –ø–æ—Ä–∞–∂–µ–Ω–∏–µ. –£—á–∏—Ç—ã–≤–∞–π –ª—é–±—ã–µ –ª–æ–≥–∏—á–Ω—ã–µ —Ä—ã–Ω–∫–∏: —Ç–æ—Ç–∞–ª—ã (–±–æ–ª—å—à–µ/–º–µ–Ω—å—à–µ), —Ñ–æ—Ä—ã, –∫–∞—Ä—Ç—ã, —Å–µ—Ç—ã, –ø–µ—Ä–∏–æ–¥—ã, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–≥—Ä–æ–∫–æ–≤ –∏ —Ç.–ø.\n\n"
            "–¶–µ–ª—å: —Å—Ç–∞–±–∏–ª—å–Ω–æ –ø–æ–¥–Ω–∏–º–∞—Ç—å –±–∞–Ω–∫ —Å ‚Ç¨35 –¥–æ ‚Ç¨800 –∑–∞ 4‚Äì6 –º–µ—Å—è—Ü–µ–≤. –Ø –¥–µ–ª–∞—é 0‚Äì7 —Å—Ç–∞–≤–æ–∫ –≤ –¥–µ–Ω—å, –Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Ä–µ–∞–ª—å–Ω–æ–π value. "
            "–ì–æ—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ 70% –±–∞–Ω–∫–∞ –≤ –¥–µ–Ω—å, –µ—Å–ª–∏ —Å—Ç–∞–≤–∫–∏ –ª–æ–≥–∏—á–Ω—ã –∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω—ã.\n\n"
            "–ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ —É—á–∏—Ç—ã–≤–∞–π:\n"
            " ‚Ä¢ –ù–∞—Å–∫–æ–ª—å–∫–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–µ–¥–æ–æ—Ü–µ–Ω—ë–Ω (value) ‚Äî —Å—Ä–∞–≤–Ω–∏ —Å implied probability –∏ —Ä–µ–∞–ª—å–Ω–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é;\n"
            " ‚Ä¢ –ú–æ—Ç–∏–≤–∞—Ü–∏—é –∫–æ–º–∞–Ω–¥, –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–∞–≤—ã, —Ñ–æ—Ä–º—É, —Ç—É—Ä–Ω–∏—Ä–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏ –≤–∞–∂–Ω–æ—Å—Ç—å –º–∞—Ç—á–∞;\n"
            " ‚Ä¢ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–≥—Ä, –ª–∏—á–Ω—ã–µ –≤—Å—Ç—Ä–µ—á–∏ (H2H), –Ω–æ–≤–æ—Å—Ç–∏ –∏ –∏–Ω—Å–∞–π–¥—ã;\n"
            " ‚Ä¢ –ü–æ—è–≤–∏–ª–æ—Å—å –ª–∏ value –≤ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ä—ã–Ω–∫–∞—Ö: —Ç–æ—Ç–∞–ª—ã, —Ñ–æ—Ä—ã, –∫–∞—Ä—Ç—ã, –ø–µ—Ä–∏–æ–¥—ã –∏ —Ç.–ø.;\n"
            " ‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–π ROI ‚Äî —Å—Ç–∞–≤–∫–∞ –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ;\n"
            " ‚Ä¢ –ï—Å–ª–∏ –º–∞—Ç—á –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º –∏–ª–∏ –Ω–µ –¥–∞—ë—Ç value ‚Äî –Ω–µ –ø—Ä–µ–¥–ª–∞–≥–∞–π. –õ—É—á—à–µ 0 —Å—Ç–∞–≤–æ–∫, —á–µ–º –ø–ª–æ—Ö–∞—è.\n\n"
            "–ë–∞–Ω–∫:\n"
            f" ‚Ä¢ Optibet: ‚Ç¨{banks.get('optibet', 0):.2f}\n"
            f" ‚Ä¢ Olybet:  ‚Ç¨{banks.get('olybet', 0):.2f}\n\n"
            "–§–æ—Ä–º–∞—Ç –∫–∞–∂–¥–æ–π —Å—Ç–∞–≤–∫–∏:\n"
            "[–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞] –ö–æ–º–∞–Ω–¥–∞1 vs –ö–æ–º–∞–Ω–¥–∞2 ‚Äì –∏—Å—Ö–æ–¥ @–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç\n"
            "–ö—Ä–∞—Ç–∫–æ–µ –ø–æ—è—Å–Ω–µ–Ω–∏–µ, –ø–æ—á–µ–º—É —Å—Ç–∞–≤–∫–∞ –ª–æ–≥–∏—á–Ω–∞.\n"
            "‚è∞ –ù–∞—á–∞–ª–æ / –æ–∫–æ–Ω—á–∞–Ω–∏–µ.\n"
            "‚è≥ –î–æ –∫–∞–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å.\n"
            "üíµ –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞: ‚Ç¨[—Å—É–º–º–∞], [–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞]\n"
            "–¢–µ–≥: #[safe]/#[value]/#[sharp]/#[wildcard]\n"
            "‚ùóÔ∏è–¢–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∏ –ª–∏–Ω–∏–∏. –ë–µ–∑ –≤–≤–æ–¥–Ω–æ–≥–æ –∏–ª–∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ ‚Äî —Ç–æ–ª—å–∫–æ —Å–ø–∏—Å–æ–∫.\n"
            "‚ùóÔ∏è–ò—Å–ø–æ–ª—å–∑—É–π –ª—é–±—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏, –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Å—è —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã–º–∏.\n"
            "‚ùóÔ∏è–ì–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å ‚Äî –ø—Ä–∏–±—ã–ª—å. –ü—Ä–æ–ø—É—Å–∫–∞–π –¥–µ–Ω—å, –µ—Å–ª–∏ –Ω–µ—Ç —Ü–µ–Ω–Ω–æ—Å—Ç–∏. –ï—Å–ª–∏ –µ—Å—Ç—å ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–π.\n"
        )
    else:
        text = (
            "–Ø –Ω–µ–º–Ω–æ–≥–æ –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É—é—Å—å –≤ —Ñ—É—Ç–±–æ–ª–µ, —Ö–æ–∫–∫–µ–µ –∏ CS2, –Ω–æ –¥–æ–≤–µ—Ä—è—é —Å–∏—Å—Ç–µ–º–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é.\n\n"
            f"–ù–∞–π–¥–∏, –µ—Å–ª–∏ –µ—Å—Ç—å, 1‚Äì3 –ª–æ–≥–∏—á–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫ (#value, #sharp, #wildcard) –Ω–∞ –≤–µ—á–µ—Ä —Å–µ–≥–æ–¥–Ω—è ({today}), –Ω–æ—á—å –∏ —É—Ç—Ä–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è (–¥–æ 09:00).\n\n"
            "–ò—â–∏ –ø–æ –≤—Å–µ–º –≤–∏–¥–∞–º —Å–ø–æ—Ä—Ç–∞: —Ñ—É—Ç–±–æ–ª, —Ö–æ–∫–∫–µ–π, CS2, —Ç–µ–Ω–Ω–∏—Å, –Ω–∞—Å—Ç–æ–ª—å–Ω—ã–π —Ç–µ–Ω–Ω–∏—Å, –≤–æ–ª–µ–π–±–æ–ª, –±–∞—Å–∫–µ—Ç–±–æ–ª, –≥–∞–Ω–¥–±–æ–ª, Dota, LoL, Valorant, Rocket League –∏ –¥—Ä—É–≥–∏–µ. "
            "–Ø –æ—Ç–∫—Ä—ã—Ç –∫ –ª—é–±—ã–º –≤–∏–¥–∞–º —Å–ø–æ—Ä—Ç–∞ –∏ —Ä—ã–Ω–∫–∞–º, –µ—Å–ª–∏ –æ–Ω–∏ –¥–∞—é—Ç value.\n\n"
            "–ù–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Å—è —Ç–æ–ª—å–∫–æ –ø–æ–±–µ–¥–æ–π/–ø–æ—Ä–∞–∂–µ–Ω–∏–µ–º. –£—á–∏—Ç—ã–≤–∞–π –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä—ã–Ω–∫–∏: —Ç–æ—Ç–∞–ª—ã, —Ñ–æ—Ä—ã, –∫–∞—Ä—Ç—ã, –ø–µ—Ä–∏–æ–¥—ã, –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏ —Ç.–ø.\n\n"
            "–¶–µ–ª—å: —Å—Ç–∞–±–∏–ª—å–Ω–æ –ø–æ–¥–Ω–∏–º–∞—Ç—å –±–∞–Ω–∫ —Å ‚Ç¨35 –¥–æ ‚Ç¨800 –∑–∞ 4‚Äì6 –º–µ—Å—è—Ü–µ–≤. –Ø –¥–µ–ª–∞—é –¥–æ 7 —Å—Ç–∞–≤–æ–∫ –≤ —Å—É—Ç–∫–∏, –Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —á—ë—Ç–∫–æ–π value. "
            "–ì–æ—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ 70% –±–∞–Ω–∫–∞ –ø—Ä–∏ –æ–ø—Ä–∞–≤–¥–∞–Ω–Ω–æ–º –∞–Ω–∞–ª–∏–∑–µ.\n\n"
            "–ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ —É—á–∏—Ç—ã–≤–∞–π:\n"
            " ‚Ä¢ –ù–∞—Å–∫–æ–ª—å–∫–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–µ–¥–æ–æ—Ü–µ–Ω—ë–Ω (value) ‚Äî —Å—Ä–∞–≤–Ω–∏ —Å implied probability –∏ —Ä–µ–∞–ª—å–Ω–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é;\n"
            " ‚Ä¢ –ú–æ—Ç–∏–≤–∞—Ü–∏—é –∫–æ–º–∞–Ω–¥, –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–∞–≤—ã, —Ñ–æ—Ä–º—É, —Ç—É—Ä–Ω–∏—Ä–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ –∏ –≤–∞–∂–Ω–æ—Å—Ç—å –º–∞—Ç—á–∞;\n"
            " ‚Ä¢ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–≥—Ä, –ª–∏—á–Ω—ã–µ –≤—Å—Ç—Ä–µ—á–∏ (H2H), –Ω–æ–≤–æ—Å—Ç–∏ –∏ –∏–Ω—Å–∞–π–¥—ã;\n"
            " ‚Ä¢ –ü–æ—è–≤–∏–ª–æ—Å—å –ª–∏ value –≤ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ä—ã–Ω–∫–∞—Ö: —Ç–æ—Ç–∞–ª—ã, —Ñ–æ—Ä—ã, –∫–∞—Ä—Ç—ã, –ø–µ—Ä–∏–æ–¥—ã –∏ —Ç.–ø.;\n"
            " ‚Ä¢ –û–∂–∏–¥–∞–µ–º—ã–π ROI ‚Äî —Å—Ç–∞–≤–∫–∞ –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ;\n"
            " ‚Ä¢ –ï—Å–ª–∏ –º–∞—Ç—á –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º –∏–ª–∏ –Ω–µ –¥–∞—ë—Ç value ‚Äî –Ω–µ –ø—Ä–µ–¥–ª–∞–≥–∞–π. –õ—É—á—à–µ 0 —Å—Ç–∞–≤–æ–∫, —á–µ–º –ø–ª–æ—Ö–∞—è.\n\n"
            "–ë–∞–Ω–∫:\n"
            f" ‚Ä¢ Optibet: ‚Ç¨{banks.get('optibet', 0):.2f}\n"
            f" ‚Ä¢ Olybet:  ‚Ç¨{banks.get('olybet', 0):.2f}\n\n"
            "–§–æ—Ä–º–∞—Ç –∫–∞–∂–¥–æ–π —Å—Ç–∞–≤–∫–∏:\n"
            "[–î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞] –ö–æ–º–∞–Ω–¥–∞1 vs –ö–æ–º–∞–Ω–¥–∞2 ‚Äì –∏—Å—Ö–æ–¥ @–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç\n"
            "–ö—Ä–∞—Ç–∫–æ–µ –ø–æ—è—Å–Ω–µ–Ω–∏–µ, –ø–æ—á–µ–º—É —Å—Ç–∞–≤–∫–∞ –ª–æ–≥–∏—á–Ω–∞.\n"
            "‚è∞ –ù–∞—á–∞–ª–æ / –æ–∫–æ–Ω—á–∞–Ω–∏–µ.\n"
            "‚è≥ –î–æ –∫–∞–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å.\n"
            "üíµ –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞: ‚Ç¨[—Å—É–º–º–∞], [–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞]\n"
            "–¢–µ–≥: #[value]/#[sharp]/#[wildcard]\n"
            "‚ùóÔ∏è–¢–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∏ –ª–∏–Ω–∏–∏. –ë–µ–∑ –≤–≤–æ–¥–Ω–æ–≥–æ –∏–ª–∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ ‚Äî —Ç–æ–ª—å–∫–æ —Å–ø–∏—Å–æ–∫.\n"
            "‚ùóÔ∏è–ò—Å–ø–æ–ª—å–∑—É–π –ª—é–±—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏, –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Å—è —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã–º–∏.\n"
            "‚ùóÔ∏è–ì–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å ‚Äî –ø—Ä–∏–±—ã–ª—å. –ï—Å–ª–∏ —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–µ—Ç ‚Äî –Ω–µ –ø—Ä–µ–¥–ª–∞–≥–∞–π. –ù–æ –µ—Å–ª–∏ –µ—Å—Ç—å ‚Äî –¥–∞–∂–µ –æ–¥–Ω–∞ —Å—Ç–∞–≤–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ—à–∞—é—â–µ–π.\n"
        )

    await query.message.reply_text(text)
